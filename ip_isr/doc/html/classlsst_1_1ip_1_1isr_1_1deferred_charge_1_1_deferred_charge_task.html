<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>lsst.ip.isr: lsst.ip.isr.deferredCharge.DeferredChargeTask Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">lsst.ip.isr<span id="projectnumber">&#160;unknown</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacelsst.html">lsst</a></li><li class="navelem"><a class="el" href="namespacelsst_1_1ip.html">ip</a></li><li class="navelem"><a class="el" href="namespacelsst_1_1ip_1_1isr.html">isr</a></li><li class="navelem"><a class="el" href="namespacelsst_1_1ip_1_1isr_1_1deferred_charge.html">deferredCharge</a></li><li class="navelem"><a class="el" href="classlsst_1_1ip_1_1isr_1_1deferred_charge_1_1_deferred_charge_task.html">DeferredChargeTask</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="classlsst_1_1ip_1_1isr_1_1deferred_charge_1_1_deferred_charge_task-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">lsst.ip.isr.deferredCharge.DeferredChargeTask Class Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for lsst.ip.isr.deferredCharge.DeferredChargeTask:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classlsst_1_1ip_1_1isr_1_1deferred_charge_1_1_deferred_charge_task.png" alt=""/>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aac5d4a8a3ccb5357f5b1aa1bd948e3fe"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlsst_1_1ip_1_1isr_1_1deferred_charge_1_1_deferred_charge_task.html#aac5d4a8a3ccb5357f5b1aa1bd948e3fe">run</a> (self, exposure, ctiCalib, gains=None)</td></tr>
<tr class="separator:aac5d4a8a3ccb5357f5b1aa1bd948e3fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:aabee465a6c73f09a49bfe136c290548a"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlsst_1_1ip_1_1isr_1_1deferred_charge_1_1_deferred_charge_task.html#aabee465a6c73f09a49bfe136c290548a">flipData</a> (ampData, amp)</td></tr>
<tr class="separator:aabee465a6c73f09a49bfe136c290548a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a656132b182a199f0421eaf443da9ae94"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlsst_1_1ip_1_1isr_1_1deferred_charge_1_1_deferred_charge_task.html#a656132b182a199f0421eaf443da9ae94">local_offset_inverse</a> (inputArr, drift_scale, decay_time, num_previous_pixels=15)</td></tr>
<tr class="separator:a656132b182a199f0421eaf443da9ae94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43415527fe10ff9d0c6eb20e4f16fb9f"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlsst_1_1ip_1_1isr_1_1deferred_charge_1_1_deferred_charge_task.html#a43415527fe10ff9d0c6eb20e4f16fb9f">local_trap_inverse</a> (inputArr, trap, global_cti=0.0, num_previous_pixels=6)</td></tr>
<tr class="separator:a43415527fe10ff9d0c6eb20e4f16fb9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-attribs" name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a0ef00e5e6ab355ded1195fc7d00a815a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlsst_1_1ip_1_1isr_1_1deferred_charge_1_1_deferred_charge_task.html#a0ef00e5e6ab355ded1195fc7d00a815a">ConfigClass</a> = <a class="el" href="classlsst_1_1ip_1_1isr_1_1deferred_charge_1_1_deferred_charge_config.html">DeferredChargeConfig</a></td></tr>
<tr class="separator:a0ef00e5e6ab355ded1195fc7d00a815a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Task to correct an exposure for charge transfer inefficiency.

This uses the methods described by Snyder et al. 2021, Journal of
Astronimcal Telescopes, Instruments, and Systems, 7,
048002. doi:10.1117/1.JATIS.7.4.048002 (Snyder+21).
</pre> 
<p class="definition">Definition at line <a class="el" href="deferred_charge_8py_source.html#l00526">526</a> of file <a class="el" href="deferred_charge_8py_source.html">deferredCharge.py</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="aabee465a6c73f09a49bfe136c290548a" name="aabee465a6c73f09a49bfe136c290548a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabee465a6c73f09a49bfe136c290548a">&#9670;&#160;</a></span>flipData()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def lsst.ip.isr.deferredCharge.DeferredChargeTask.flipData </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ampData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>amp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Flip data array such that readout corner is at lower-left.

Parameters
----------
ampData : `numpy.ndarray`, (nx, ny)
    Image data to flip.
amp : `lsst.afw.cameraGeom.Amplifier`
    Amplifier to get readout corner information.

Returns
-------
ampData : `numpy.ndarray`, (nx, ny)
    Flipped image data.
</pre> 
<p class="definition">Definition at line <a class="el" href="deferred_charge_8py_source.html#l00603">603</a> of file <a class="el" href="deferred_charge_8py_source.html">deferredCharge.py</a>.</p>

</div>
</div>
<a id="a656132b182a199f0421eaf443da9ae94" name="a656132b182a199f0421eaf443da9ae94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a656132b182a199f0421eaf443da9ae94">&#9670;&#160;</a></span>local_offset_inverse()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def lsst.ip.isr.deferredCharge.DeferredChargeTask.local_offset_inverse </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>inputArr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>drift_scale</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>decay_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>num_previous_pixels</em> = <code>15</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Remove CTI effects from local offsets.

    This implements equation 10 of Snyder+21.  For an image with
    CTI, s'(m, n), the correction factor is equal to the maximum
    value of the set of:

    .. code-block::

        {A_L s'(m, n - j) exp(-j t / \tau_L)}_j=0^jmax

    Parameters
    ----------
    inputArr : `numpy.ndarray`, (nx, ny)
        Input image data to correct.
    drift_scale : `float`
        Drift scale (Snyder+21 A_L value) to use in correction.
    decay_time : `float`
        Decay time (Snyder+21 \tau_L) of the correction.
    num_previous_pixels : `int`, optional
        Number of previous pixels to use for correction.  As the
        CTI has an exponential decay, this essentially truncates
        the correction where that decay scales the input charge to
        near zero.

    Returns
    -------
    outputArr : `numpy.ndarray`, (nx, ny)
        Corrected image data.</pre> 
<p class="definition">Definition at line <a class="el" href="deferred_charge_8py_source.html#l00635">635</a> of file <a class="el" href="deferred_charge_8py_source.html">deferredCharge.py</a>.</p>

</div>
</div>
<a id="a43415527fe10ff9d0c6eb20e4f16fb9f" name="a43415527fe10ff9d0c6eb20e4f16fb9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43415527fe10ff9d0c6eb20e4f16fb9f">&#9670;&#160;</a></span>local_trap_inverse()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def lsst.ip.isr.deferredCharge.DeferredChargeTask.local_trap_inverse </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>inputArr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>trap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>global_cti</em> = <code>0.0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>num_previous_pixels</em> = <code>6</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Apply localized trapping inverse operator to pixel signals.

    This implements equation 13 of Snyder+21.  For an image with
    CTI, s'(m, n), the correction factor is equal to the maximum
    value of the set of:

    .. code-block::

        {A_L s'(m, n - j) exp(-j t / \tau_L)}_j=0^jmax

    Parameters
    ----------
    inputArr : `numpy.ndarray`, (nx, ny)
        Input image data to correct.
    trap : `lsst.ip.isr.SerialTrap`
        Serial trap describing the capture and release of charge.
    global_cti: `float`
        Mean charge transfer inefficiency, b from Snyder+21.
    num_previous_pixels : `int`, optional
        Number of previous pixels to use for correction.

    Returns
    -------
    outputArr : `numpy.ndarray`, (nx, ny)
        Corrected image data.</pre> 
<p class="definition">Definition at line <a class="el" href="deferred_charge_8py_source.html#l00682">682</a> of file <a class="el" href="deferred_charge_8py_source.html">deferredCharge.py</a>.</p>

</div>
</div>
<a id="aac5d4a8a3ccb5357f5b1aa1bd948e3fe" name="aac5d4a8a3ccb5357f5b1aa1bd948e3fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac5d4a8a3ccb5357f5b1aa1bd948e3fe">&#9670;&#160;</a></span>run()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def lsst.ip.isr.deferredCharge.DeferredChargeTask.run </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>exposure</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ctiCalib</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>gains</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Correct deferred charge/CTI issues.

Parameters
----------
exposure : `lsst.afw.image.Exposure`
    Exposure to correct the deferred charge on.
ctiCalib : `lsst.ip.isr.DeferredChargeCalib`
    Calibration object containing the charge transfer
    inefficiency model.
gains : `dict` [`str`, `float`]
    A dictionary, keyed by amplifier name, of the gains to
    use.  If gains is None, the nominal gains in the amplifier
    object are used.

Returns
-------
exposure : `lsst.afw.image.Exposure`
    The corrected exposure.
</pre> 
<p class="definition">Definition at line <a class="el" href="deferred_charge_8py_source.html#l00536">536</a> of file <a class="el" href="deferred_charge_8py_source.html">deferredCharge.py</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a0ef00e5e6ab355ded1195fc7d00a815a" name="a0ef00e5e6ab355ded1195fc7d00a815a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ef00e5e6ab355ded1195fc7d00a815a">&#9670;&#160;</a></span>ConfigClass</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">lsst.ip.isr.deferredCharge.DeferredChargeTask.ConfigClass = <a class="el" href="classlsst_1_1ip_1_1isr_1_1deferred_charge_1_1_deferred_charge_config.html">DeferredChargeConfig</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="deferred_charge_8py_source.html#l00533">533</a> of file <a class="el" href="deferred_charge_8py_source.html">deferredCharge.py</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>python/lsst/ip/isr/<a class="el" href="deferred_charge_8py_source.html">deferredCharge.py</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Jul 12 2023 01:37:58 for lsst.ip.isr by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
